<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!-- Some useful entities borrowed from HTML -->
<!ENTITY ndash  "&#x2013;">
<!ENTITY mdash  "&#x2014;">
<!ENTITY hellip "&#x2026;">
<!ENTITY plusmn "&#xB1;">

<!-- Useful for describing APIs -->
<!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
<!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
<!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
<!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>

<!ENTITY CHECK  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
<imageobject>
<imagedata fileref="figures/Check_mark_23x20_02.svg"
format="SVG" scale="60"/>
</imageobject>
</inlinemediaobject>'>

<!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
<imageobject>
<imagedata fileref="figures/Arrow_east.svg"
format="SVG" scale="60"/>
</imageobject>
</inlinemediaobject>'>
]>
<chapter xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0"
    xml:id="ch_review">
    <?dbhtml stop-chunking?>
    <title>Draft and Production Documents</title>


    <para>You can create <emphasis role="italic">draft
            documents</emphasis> for review. Drafts are identified by
        the <literal>DRAFT</literal> watermark and status bar. The
        watermark and status bar on a draft can also indicate the
        status of the product, such as <literal>PREVIEW</literal> or
            <literal>LIMITED AVAILABILITY</literal>, or whether the
        document is internal-only. Draft documents appear on the <link
            xlink:href="docs-beta.rackspace.com"
            >docs-beta.rackspace.com</link> site. To configure a
        document as a draft, set the <markup>status</markup> attribute
        to <literal>draft</literal> on the <markup>book</markup> or
            <markup>article</markup> element. You can also create text
        in the document that appears in only the draft document but is
        removed when you remove the <markup>status="draft"</markup>
        attribute. To add additional text to the watermark and status
        bar, see <xref linkend="watermark_proc"/>.</para>
    <para>After a document has been reviewed, you can create <emphasis
            role="italic">production documents</emphasis> for internal
        or external distribution. For example, you might want to
        document a product that is in preview. Initially, you'll want
        to create a draft version of the preview document for review.
        After the preview launches publicly, you can remove the draft
        status of your document but leave the document version at
        preview. </para>



    <itemizedlist>
        <listitem>

            <para security="draft">Documents for internal distribution contain internal
                content appropriate for Rackspace employees. These
                documents might also contain external content. These
                documents appear on the <link
                    xlink:href="docs-internal.rackspace.com"
                    >docs-internal.rackspace.com</link> site. </para>
        </listitem>
        <listitem>
            <para>Documents for external distribution contain content
                appropriate for Rackspace customers and appear on the
                    <link xlink:href="docs.rackspace.com"
                    >docs.rackspace.com</link> site. Sometimes, you
                must publish documents on docs.rackspace.com for
                private betas. Though these documents are not listed
                on the landing page, your product team sends links to
                the document directly to users. To prevent random
                people from finding the content in Google searches,
                you must configure your search engine. See <xref
                    linkend="search_engine_config"/>.</para>

        </listitem>
    </itemizedlist>

    <variablelist>
        <varlistentry>
            <term>Watermarks and status bars</term>
            <listitem>
                <para>&lt;status="DRAFT"> &lt;?rax
                    status.bar.text="RAX INTERNAL"?&gt;</para>
                <para>A line of text that appears on the cover page of
                    PDF output. For example, for a preview document,
                    you might configure a <guilabel>PREVIEW</guilabel>
                    watermark, as shown in the following figure: <mediaobject>
                        <imageobject>
                            <imagedata fileref="figures/watermark.png"
                                contentwidth="4in"/>
                        </imageobject>
                    </mediaobject></para>
                <para>Does not appear in webhelp output.</para>
                <para>Appears as vertical text on left edge of PDF or
                    webhelp output. <mediaobject>
                        <imageobject>
                            <imagedata fileref="figures/statusbar.png"
                                contentwidth="4in"/>
                        </imageobject>
                    </mediaobject></para>
            </listitem>
        </varlistentry>

        <varlistentry>
            <term>Content Filtering</term>
            <listitem>
                <para/>
            </listitem>
        </varlistentry>
        <varlistentry>
            <term>Meta robots</term>
            <listitem>
                <para/>
            </listitem>
        </varlistentry>
        <varlistentry>
            <term>Google analytics</term>
            <listitem>
                <para>Configure your content to use <link
                        xlink:href="http://www.google.com/analytics/"
                        >Google Analytics</link> to observe which
                    pages are being read, what links are being
                    followed, what searches are leading readers to our
                    content, and other information that might help you
                    update content. See <xref
                        linkend="google_analytics"/>.</para>
            </listitem>
        </varlistentry>
        <varlistentry>
            <term>Commenting tools</term>
            <listitem>
                <para>You can configure your document to use the <link
                        xlink:href="http://disqus.com">Disqus</link>
                    or HashCode commenting tool:</para>
                <para>
                    <itemizedlist>
                        <listitem>
                            <para><emphasis role="bold"
                                   >HashCode</emphasis>. Collects
                                comments on internal and external
                                content. If you publish a document on
                                docs-internal or docs-beta, the
                                comments are viewable internally only.
                                If you publish a document on
                                docs.rackspace.com, the comments are
                                viewable internally and externally.
                                Comments are stored on a Rackspace
                                server and are not integrated with
                                Facebook and other social media tools.
                            </para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold"
                                   >Disqus</emphasis>. Collects
                                comments on internal and external
                                content. Comments are stored on a
                                Disqus server and might be exposed to
                                the outside world through integration
                                social media sites like Facebook.
                                Depending on your settings, if you
                                make a comment on content with Disqus,
                                that comment might be shared with your
                                Facebook friends and Twitter followers
                                even if you commented while inside the
                                Rackspace VPN. </para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para>See <xref linkend="commenting"/>.</para>
            </listitem>
        </varlistentry>
    </variablelist>
    <table frame="void">
        <caption>Document types</caption>

        <thead>
            <tr>
                <th>Document</th>
                <th>Watermark and status bar</th>
                <th>Location</th>
                <th>Content filtering</th>
                <th>Search engines</th>
                <th>Google analytics</th>
                <th>Commenting</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Draft</td>
                <td><para>DRAFT </para>
                    <para>Can include additional text such as PREVIEW
                        or LIMITED AVAILABILITY</para></td>
                <td>docs-beta.rackspace.com</td>
                <td/>
                <td>Set to 1</td>
                <td>Set to 0</td>
                <td>HashCode</td>
            </tr>
            <tr>
                <td>Internal</td>
                <td>INTERNAL</td>
                <td>docs-internal.rackspace.com</td>
                <td/>
                <td>Set to 1</td>
                <td>Set to 0</td>
                <td>HashCode</td>
            </tr>
            <tr>
                <td>External</td>
                <td>None, or text indicating product status, such as
                    PREVIEW</td>
                <td>docs.rackspace.com</td>
                <td/>
                <td>Not applicable</td>
                <td>Set to 1</td>
                <td>Disqus</td>
            </tr>
            <tr>
                <td>External private betas</td>
                <td/>
                <td>docs.rackspace.com</td>
                <td/>
                <td>Set to 1</td>
                <td>Set to 0</td>
                <td>HashCode</td>
            </tr>
        </tbody>
    </table>





    <section xml:id="drafts">
        <title>Create Drafts</title>
        <para>Draft documents contain the <literal>DRAFT</literal>
            watermark and status bar. A draft document can also
            contain draft-only text that appears in the draft but is
            removed when you remove the
                <markup>status="draft"</markup> tag from the
                <markup>book</markup> or <markup>article</markup>
            element.</para>
        <para>
            <procedure>
                <title>To create a draft document</title>
                <step>
                    <para>In the main XML file for your book or
                        release notes, add the
                            <markup>status="draft"</markup> attribute
                        to the <markup>book</markup> or
                            <markup>article</markup> element. </para>
                    <para>For
                        example:<programlisting>&lt;book xmlns="http://docbook.org/ns/docbook"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xi="http://www.w3.org/2001/XInclude" version="5.0"
  xml:id="writers-guide" <emphasis role="bold">status="DRAFT"</emphasis>&gt;</programlisting></para>
                </step>
                <step>
                    <para>To configure content to be visible in the
                        draft document only, add the
                            <markup>security="draft"</markup>
                        attribute to the content. For example:
                        <programlisting>&lt;para security="draft"&gt;Documents for internal distribution contain internal content appropriate for Rackspace employees.&lt;/para&gt;</programlisting></para>
                </step>
            </procedure>
        </para>
    </section>
    <section xml:id="watermark_concept">
        <title>Watermark and Status Bar</title>

        <note>
            <para>You can also add text to the watermark bar by adding
                a processing instruction as a child of the root
                element: <programlisting>&lt;?rax status.bar.text="CONFIDENTIAL" ?&gt;</programlisting></para>
            <para>If the text is long, use 1.3.0-SNAPSHOT or later to
                make it fit by controlling its size like
                this: <programlisting>&lt;?rax status.bar.text.font.size="50px" status.bar.text="LIMITED AVAILABILITY" ?&gt;</programlisting></para>
            <para>The default size of the text is about 71.3px; 50px
                might be the right size for "LIMITED
                AVAILABILITY".</para>
        </note>
        <para>The following images show what the output looks like
            with <code>status="draft"</code> on the root element of
            the document and
                <code>&lt;security&gt;reviewer&lt;/security&gt;</code>
            in the pom.xml file: <mediaobject>
                <imageobject>
                    <imagedata fileref="figures/watermark-pdf.png"
                        contentwidth="6in"/>
                </imageobject>
            </mediaobject><mediaobject>
                <imageobject>
                    <imagedata fileref="figures/watermark-webhelp.png"
                        contentwidth="6in"/>
                </imageobject>
            </mediaobject></para>

    </section>
    <section xml:id="watermark_proc">
        <title>Configure the Watermark and Status Bar</title>
        <para>A watermark is a line of text that appears on the cover
            page of PDF output and that identifies the product and
            document version. </para>
        <para>Watermarks do not appear in webhelp output, though
            status bars do. </para>
        <para>For example, to create a draft for the preview version
            of a product, you would set the document status to
                <literal>DRAFT</literal> and configure a
                <guilabel>PREVIEW</guilabel> watermark. The cover
            shows a <guilabel>DRAFT PREVIEW</guilabel> watermark, as
            shown in the following figure: <mediaobject>
                <imageobject>
                    <imagedata fileref="figures/watermarkdraft.png"
                        contentwidth="4in"/>
                </imageobject>
            </mediaobject>When the product launches as preview, you
            would remove the DRAFT status, but leave the
                <guilabel>PREVIEW</guilabel> watermark, as shown in
            the following figure: <mediaobject>
                <imageobject>
                    <imagedata fileref="figures/watermark.png"
                        contentwidth="4in"/>
                </imageobject>
            </mediaobject></para>
        <para>
            <procedure>
                <title>To configure a watermark in your
                    document</title>
                <step>
                    <title>Configure the draft status</title>
                    <para>If the document is not a draft, skip this
                        step and proceed to <xref linkend="security"
                        />. </para>
                    <para>If the document is a draft, set the
                            <literal>status</literal> attribute to
                            <literal>DRAFT</literal> on the
                            <literal>book</literal> or
                            <literal>article</literal> tag, as
                        follows:
                        <programlisting>&lt;book  
    xmlns="http://docbook.org/ns/docbook" 
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" 
    xmlns:svg="http://www.w3.org/2000/svg"
    version="5.0" 
    xml:id="example-foo" <emphasis role="bold">status="DRAFT"</emphasis>&gt;
...
&lt;/book&gt;</programlisting></para>
                </step>
                <step xml:id="security">
                    <title>Configure the document security</title>
                    <para>you can use one of the following tags, or
                        both tags in conjunction with each other: In
                        the body of the document, set
                            <literal>status.bar.text</literal> to
                        appear on the title page and on the left edge
                        of every page. For example,</para>
                    <programlisting>&lt;?rax title.font.size="35px" subtitle.font.size="20px"?&gt;    
   &lt;title&gt;Rackspace Cloud Load Balancers Developer Guide for Service Management&lt;/title&gt;
   &lt;titleabbrev&gt;Rackspace Cloud LB Mgmt Guide&lt;/titleabbrev&gt;    
   &lt;?rax status.bar.text="RAX INTERNAL"?&gt;    
   &lt;info&gt;        
 &lt;author&gt; </programlisting>
                    <para>This mark-up makes a cover page like
                        this:</para>
                    <mediaobject>
                        <imageobject>
                            <imagedata
                                fileref="figures/cover-RAXINTERNAL.png"
                                contentwidth="6in"/>
                        </imageobject>
                    </mediaobject>
                    <para>In pom.xml, set
                            <code>&lt;security&gt;</code> to add text
                        to the left edge of every page. For
                        example:<programlisting>&lt;security&gt;internal&lt;/security&gt;</programlisting>If
                        pom.xml contains <code>&lt;?rax
                            status.bar.text="RAX "?&gt;</code>, edges
                        each page in repeating <literal>RAX
                            INTERNAL</literal>.</para>
                </step>

                <step>
                    <para/>
                </step>
            </procedure>
        </para>

        <para/>
        <para>You can generate the following flavors of PDF or web
            help output for a DocBook document:<informaltable
                rules="all">
                <col width="10%"/>
                <col width="10%"/>
                <col width="80%"/>
                <thead>
                    <tr>
                        <th>Version</th>
                        <th>Status bar/watermark text</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Reviewer</td>
                        <td>REVIEWER</td>
                        <td>In-progress document. Shows remarks and
                            internal and external content.</td>
                    </tr>
                    <tr>
                        <td>Internal</td>
                        <td>INTERNAL</td>
                        <td>Internal-only. Strips out all reviewer
                            content but leaves in content flagged as
                                <code>security="internal"</code>
                        </td>
                    </tr>
                    <tr>
                        <td>External</td>
                        <td>None.</td>
                        <td>Customer-facing.</td>
                    </tr>
                    <tr>
                        <td>Draft</td>
                        <td>DRAFT</td>
                        <td>Add status="draft" to the &lt;book&gt; or
                            &lt;article&gt; element. When
                            status="draft" the watermark contains the
                            word DRAFT and elements that contain
                            security="draft" are included. If you do
                            not add status="draft" to the root
                            element, then elements with
                            security="draft" are omitted.</td>
                    </tr>
                </tbody>
            </informaltable></para>
    </section>

    <section xml:id="filter">
        <title>Filter Content</title>
        <para>By using
                <code>&lt;security&gt;internal&lt;/security&gt;</code>
            in your pom.xml, you can produce internal-only and
            external versions of same document where the external
            version is a subset of the internal one.<table
                frame="void">
                <caption>Filter Content</caption>
                <col width="35%"/>
                <col width="65%"/>
                <thead>
                    <tr>
                        <th>Tag</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>&lt;para
                                security="draft"&gt;...&lt;/para&gt;</code></td>
                        <td>Filters out the specified content UNLESS
                            the root element of the document has
                                <code>status="draft"</code>, which
                            causes the watermark bar to contain the
                            word DRAFT automatically.</td>
                    </tr>
                    <tr>
                        <td><code>&lt;para
                                security="reviewer"&gt;...&lt;/para&gt;</code></td>
                        <td><para>Filters out the specified content
                                UNLESS you set
                                   <code>&lt;security&gt;reviewer&lt;/security&gt;</code>
                                in your pom.xml. If you do set
                                security to reviewer, the following
                                things also happen: <itemizedlist>
                                   <listitem>
                                   <para>Elements with
                                   <code>security="writeronly"</code>
                                   are filtered out.</para>
                                   </listitem>
                                   <listitem>
                                   <para>The watermark contains the
                                   word REVIEW. Note that elements
                                   flagged as reviewer appear with
                                   yellow highlighting.</para>
                                   </listitem>
                                </itemizedlist></para></td>
                    </tr>
                    <tr>
                        <td><code>&lt;para
                                security="internal"&gt;...&lt;/para&gt;</code></td>
                        <td>
                            <para>Filters out the specified content
                                UNLESS you set
                                   <code>&lt;security&gt;internal&lt;/security&gt;
                                </code>in your pom.xml. If you do set
                                security to reviewer, the following
                                things also happen:</para>
                            <itemizedlist>
                                <listitem>
                                   <para>Elements with
                                   <code>security="external"</code>,
                                   <code>security="reviewer"</code>,
                                   and
                                   <code>security="writeronly"</code>
                                   are filtered out. Elements flagged
                                   as <code>security="external"</code>
                                   are filtered so that you could, if
                                   you wanted, have mutually exclusive
                                   versions of the same content for
                                   external and internal
                                   audiences.</para>
                                </listitem>
                                <listitem>
                                   <para><code>&lt;remark&gt;</code>
                                   elements are filtered out.</para>
                                </listitem>
                                <listitem>
                                   <para>The watermark contains the
                                   word INTERNAL. Note that any
                                   elements flagged as
                                   <code>security="internal"</code>
                                   appear blue in the output.</para>
                                </listitem>
                            </itemizedlist>
                        </td>
                    </tr>
                    <tr>
                        <td><code>&lt;para
                                security="writeronly"&gt;...&lt;/para&gt;</code></td>
                        <td>These elements are always filtered out.
                            You can use it for stuff you want to
                            suppress for now without deleting.</td>
                    </tr>
                </tbody>
            </table></para>

    </section>
    <section xml:id="search_engine_config">
        <title>Configure Search Engine Spiders to Ignore
            Content</title>
        <para>Sometimes, you must publish documents on
            docs.rackspace.com for private betas. Though these
            documents are not listed on the landing page, your product
            team sends links to the document directly to users. To
            prevent random people from finding the content in Internet
            searches, configure search engine spiders to ignore content.<procedure>
                <title>To configure search engine spiders to ignore
                    content</title>
                <step>
                    <para>Add the <markup>metaRobots</markup> tag to
                        your pom.xml
                        file:<programlisting>&lt;metaRobots&gt;1&lt;/metaRobots&gt; </programlisting></para>
                    <para>When you do this, the following tag is added
                        to all web help HTML
                        files:<programlisting>&lt;meta name="robots" content="NOINDEX, NOFOLLOW"/&gt;</programlisting>
                        This tag tells search engine spiders to skip
                        this content.</para>
                </step>
            </procedure></para>
        <note>
            <para>Remember to remove this parameter when you are ready
                to leave private beta. </para>
        </note>

    </section>

    <section xml:id="google_analytics">
        <title>Configure Google Analytics</title>
        <para><note>
                <para>If your document uses the 1.0.5-SNAPSHOT
                    formatting plugin or later and its branding is set
                    to <literal>rackspace</literal>, Google Analytics
                    is enabled and the Google Analytics ID is set. If
                    the doc tools team changes this default handling
                    in the future, all projects would need to enable
                    Google Analytics explicitly.</para>
            </note></para>
        <para>Use the <markup>&lt;googleAnalytics&gt;</markup> tag to
            suppress or collect Google analytics. Valid values are:<itemizedlist>
                <listitem>
                    <para><markup>0</markup>. Suppresses Google
                        analytics. Use this setting for drafts and
                        internal-only documents.</para>
                </listitem>
                <listitem>
                    <para><markup>1</markup>. Collects Google
                        analytics. Use this setting for
                        customer-facing documents.</para>
                </listitem>
            </itemizedlist><procedure>
                <title>To suppress Google analytics</title>
                <step>
                    <para>Add the following line to the
                            <literal>configuration</literal> section
                        in the pom.xml file:</para>
                    <programlisting language="xml">&lt;enableGoogleAnalytics>0&lt;/enableGoogleAnalytics></programlisting>
                </step>
            </procedure><procedure>
                <title>To collect Google analytics</title>
                <step>
                    <para>Add the following lines to the
                            <literal>configuration</literal> section
                        in the pom.xml file:
                        <programlisting language="xml">&lt;enableGoogleAnalytics>1&lt;/enableGoogleAnalytics>
&lt;googleAnalyticsId&gt;UA-23102455-4&lt;/googleAnalyticsId&gt;</programlisting></para>
                    <para>The <literal>UA-23102455-4</literal> value
                        identifies our Google Analytics account.
                    </para>
                </step>
            </procedure></para>
    </section>
    <section xml:id="commenting">
        <title>Configure a Commenting Tool</title>
        <para>Use the <markup>enableDisqus</markup> tag to configure
            the <link xlink:href="http://disqus.com">Disqus</link> or
            HashCode commenting tool. Valid values are:</para>
        <itemizedlist>
            <listitem>
               
                    <para><literal>intranet</literal>. Uses HashCode.
                        Set to <literal>internet</literal> to use
                        Disqus.</para>
                
            </listitem>
        </itemizedlist>

        <procedure>
            <title>To configure the HashCode commenting tool</title>
            <step>
                <para>Add the following line to the
                        <markup>configuration</markup> section in your
                    pom.xml file:</para>
                <programlisting>&lt;enableDisqus&gt;intranet&lt;/enableDisqus&gt; </programlisting>
            </step>
        </procedure>
        <procedure>
            <title>To configure the Disqus commenting tool</title>
            <step>
                <para>Add the following line to the
                        <markup>configuration</markup> section in your
                    pom.xml file:</para>
                <programlisting>&lt;enableDisqus&gt;internet&lt;/enableDisqus&gt; </programlisting>
            </step>
        </procedure>

    </section>
</chapter>
